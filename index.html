<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Locadora de Veículos</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: url('fundo.jpg') no-repeat center center fixed;
      background-size: cover;
      padding: 20px;
      color: #222;
    }
    .container {
      max-width: 700px;
      margin: auto;
      background: rgba(255, 255, 255, 0.95);
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
    }
    label {
      font-weight: bold;
      margin-top: 15px;
      display: block;
    }
    input, select {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    button {
      margin-top: 20px;
      width: 100%;
      padding: 12px;
      background-color: #28a745;
      color: white;
      border: none;
      font-size: 16px;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover {
      background-color: #218838;
    }
  </style>
</head>
<body>

  <div class="container">
    <h1>Locação de Veículos</h1>
    <form onsubmit="return validarFormulario(event)">
      <label for="nome">Nome completo:</label>
      <input type="text" id="nome" required>

      <label for="cpf">CPF:</label>
      <input type="text" id="cpf" required maxlength="14" placeholder="123.456.789-00">

      <label for="email">E-mail:</label>
      <input type="email" id="email" required>

      <label for="telefone">Telefone:</label>
      <input type="tel" id="telefone" required>

      <label for="carro">Veículo:</label>
      <select id="carro" required>
        <option value="">Selecione...</option>
        <option value="Chevrolet Onix">Chevrolet Onix</option>
        <option value="Hyundai HB20">Hyundai HB20</option>
        <option value="Toyota Corolla">Toyota Corolla</option>
        <option value="Gol">Gol</option>
      </select>

      <label for="retirada">Data de retirada:</label>
      <input type="date" id="retirada" required>

      <label for="devolucao">Data de devolução:</label>
      <input type="date" id="devolucao" required>

      <label for="pagamento">Forma de pagamento:</label>
      <select id="pagamento" required>
        <option value="">Selecione...</option>
        <option value="Cartão de Crédito">Cartão de Crédito</option>
        <option value="PIX">PIX</option>
        <option value="Dinheiro">Dinheiro</option>
      </select>

      <p id="valorTotal" style="font-weight: bold; margin-top: 15px;">Valor total: R$ 0,00</p>

      <button type="submit">Confirmar Locação</button>
    </form>
  </div>

<script>
  const precoPorCarro = {
    "Chevrolet Onix": 80,
    "Hyundai HB20": 100,
    "Toyota Corolla": 150,
    "Gol": 90
  };

  const carro = document.getElementById("carro");
  const retirada = document.getElementById("retirada");
  const devolucao = document.getElementById("devolucao");
  const valorTotal = document.getElementById("valorTotal");

  let dias = 0;
  let total = 0;

  function calcularPreco() {
    const c = carro.value;
    const r = new Date(retirada.value);
    const d = new Date(devolucao.value);
    const hoje = new Date();
    hoje.setHours(0,0,0,0);

    if (!c || isNaN(r) || isNaN(d) || d <= r || r < hoje) {
      valorTotal.textContent = "Valor total: R$ 0,00";
      return;
    }

    dias = Math.ceil((d - r) / (1000 * 60 * 60 * 24));
    total = precoPorCarro[c] * dias;
    valorTotal.textContent = `Valor total (${dias} diárias): R$ ${total.toFixed(2).replace('.', ',')}`;
  }

  function validarFormulario(e) {
    e.preventDefault();

    const r = new Date(retirada.value);
    const d = new Date(devolucao.value);
    const hoje = new Date();
    hoje.setHours(0,0,0,0);

    if (r < hoje) return alert("A retirada não pode ser antes de hoje.");
    if (d <= r) return alert("A devolução deve ser após a retirada.");

    const dados = {
      nome: document.getElementById("nome").value,
      cpf: document.getElementById("cpf").value,
      email: document.getElementById("email").value,
      telefone: document.getElementById("telefone").value,
      carro: carro.value,
      retirada: retirada.value,
      devolucao: devolucao.value,
      pagamento: document.getElementById("pagamento").value,
      dias,
      total: total.toFixed(2).replace('.', ',')
    };

    sessionStorage.setItem("comprovante", JSON.stringify(dados));
    window.location.href = "comprovante.html";
  }

  carro.addEventListener("change", calcularPreco);
  retirada.addEventListener("change", calcularPreco);
  devolucao.addEventListener("change", calcularPreco);
</script>
</body>
</html>
